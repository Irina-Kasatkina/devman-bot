# Отправление в Telegram уведомлений о проверке работ

Проект представляет собой утилиту, отправляющую в Telegram пользователя уведомление о том, что его работа на курсах [Devman](https://dvmn.org/) проверена/

## Установка

Для запуска скриптов вам понадобится Python третьей версии.

Скачайте код с GitHub.

Для управления зависимостями Python желательно воспользоваться [virtualenv](https://pypi.org/project/virtualenv/).

Установите зависимости с помощью `pip` (или `pip3`, есть конфликт с Python2):
```
pip install -r requirements.txt
```

### Переменные окружения

Часть настроек утилит берётся из переменных окружения. Чтобы их определить, создайте файл `.env` в той же папке, где и скрипты, и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны 2 переменные:

- `DEVMAN_API_TOKEN` - персональный токен пользователя API Девмана. Это обязательная переменная. Если такого токена у вас пока нет, то вы можете получить его в первом шаге первого урока курса [Чат-боты на Python](https://dvmn.org/modules/chat-bots/).

- `TELEGRAM_BOT_TOKEN` - API-токен telegram-бота, с помощью которого будет осуществляться отправка уведомлений. Например: `TELEGRAM_BOT_TOKEN=958423683:AAEAtJ5Lde5YYfkjergber`. Если такого telegram-бота пока нет, [создайте его](https://way23.ru/регистрация-бота-в-telegram.html). Это обязательная переменная.

- `TELEGRAM_CHAT_ID` - id вашего telegram-чата с ботом, в котором будут появляться уведомления. Например: `TELEGRAM_CHAT_ID=123456789`. Чтобы получить свой chat_id, напишите в Telegram специальному боту: `@userinfobot`. Кроме этого, нужно обязательно написать что-нибудь в чате созданному боту, прежде чем начать работу с программой.

## Запуск

Для запуска нужного вам скрипта наберите в командной строке одну из команд:
```
python -m fetch_apod_nasa_images
python -m publish_all_images_in_telegram
```
Здесь для скрипта *fetch_spacex_images* можно указать необязательный параметр командной строки `{id_конкретного_запуска_ракеты}`. Например: `5eb87d47ffd86e000604b38a`.<br>
Если этот параметр указан, то скрипт получит фотографии указанного запуска.<br>
Если этот параметр не указан, то скрипт получит фотографии последнего из запусков, для которого имеются фотографии.

Для скрипта *publish_image_in_telegram* можно указать необязательный параметр командной строки `{путь_к_файлу_с_фото}` - абсолютный путь к конкретному файлу, который вы хотите опубликовать. Например: `C:/images/image1.jpg`.<br>
Если этот параметр указан, то скрипт опубликует фото из файла с указанным именем.<br>
Если этот параметр не указан, то скрипт выберет файл для публикации случайным образом из директории, указанной в переменной окружения `IMAGES_DIRECTORY` или одной из её поддиректорий.

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).