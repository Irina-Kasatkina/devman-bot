# Бот уведомлений о проверке работ Devman

Проект представляет собой бота, делающего запрос к API [Devman](https://dvmn.org/) и отправляющий в чат Telegram уведомление о том, что учебная работа учащегося проверена преподавателем.


## Установка и запуск на локальном компьютере

- Скачайте код проекта с GitHub в папку на локальном компьютере.

- Перейдите в папку с проектом.

- Установите переменные окружения.

- Затем запустите одним из двух способов: из Docker-контейнера или из виртуального окружения.

### Установка переменных окружения

Часть настроек утилит берётся из переменных окружения. Чтобы их определить, создайте файл `.env` в той же папке, где и скрипты, и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны 3 обязательные переменные:

- `DEVMAN_API_TOKEN` - персональный токен пользователя API Девмана. Это обязательная переменная. Этот токен учащиеся Devman могут получить в первом уроке курса [Чат-боты на Python](https://dvmn.org/modules/chat-bots/).

- `TELEGRAM_BOT_TOKEN` - API-токен telegram-бота, с помощью которого будет осуществляться отправка уведомлений в Telegram. Например: `TELEGRAM_BOT_TOKEN=958423683:AAEAtJ5Lde5YYfkjergber`. Если такого telegram-бота пока нет, нужно [создать его](https://way23.ru/регистрация-бота-в-telegram.html).

- `TELEGRAM_CHAT_ID` - id telegram-чата учащегося с telegram-ботом. В этом чате будут появляться уведомления. Например: `TELEGRAM_CHAT_ID=123456789`. Чтобы получить свой chat_id, нужно написать в Telegram специальному боту: `@userinfobot`. Кроме этого, нужно обязательно написать что-нибудь в чате telegram-боту, прежде чем начать работу с программой.

### Способ запуска 1. Из docker-контейнера

Для запуска из docker-контейнера необходимо:

1. [Установить Docker](https://docs.docker.com/get-docker/).

2. Создать docker-образ:
	```
	docker build . --tag <имя_docker-образа>
	```
	(вместо `<имя_docker-образа>` подставьте любое имя для создаваемого docker-образа, например `python-docker`).

3. Создать и запустить docker-контейнер на основе созданного в пункте 2 docker-образа:
	```
	docker run --rm --detach --env-file ./.env --name <имя_docker-контейнера> <имя_docker-образа>
	```
	(вместо `<имя_docker-образа>` подставьте имя, которое вы использовали в пункте 2 для создания docker-образа, например `python-docker`. Вместо `<имя_docker-контейнера>` подставьте любое имя для создаваемого docker-контейнера, например `devman-bot`).

После этого бот будет запущен в автономном режиме. Если возникнет необходимость его остановить, воспользуйтесь командой:
```
docker stop <имя_docker-контейнера>
```
(вместо `<имя_docker-контейнера>` подставьте имя, которое вы использовали в пункте 3 для создания и запуска docker-контейнера, например `devman-bot`).

### Способ запуска 2. Из виртуального окружения

Для этого способа запуска вам понадобится установленный на компьютере Python версии 3.8 или выше.

1. Для управления зависимостями [создайте виртуальное окружение](https://docs.python.org/3.8/library/venv.html) и запустите его.

2. Установите зависимости с помощью `pip` (или `pip3`, если есть конфликт с Python2):
	```
	pip install -r requirements.txt
	```

3. Наберите в командной строке консоли команду:
	```
	python devman-bot.py
	```

После этого бот будет запущен. Если возникнет необходимость его остановить, нажмите `Ctrl + C`.


### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
